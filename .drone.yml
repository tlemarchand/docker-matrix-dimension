kind: pipeline
name: default

steps:
- name: submodule
  image: debian:10
  commands:
  - apt-get update
  - apt-get install -y git
  - git submodule update --remote

- name: docker  
  image: plugins/docker
  settings:
    repo: tlemarchand/matrix-dimension
    target: app
    tags:
      - latest
      - build-$DRONE_BUILD_NUMBER
    username:
      from_secret: docker_username
    password:
      from_secret: docker_password
